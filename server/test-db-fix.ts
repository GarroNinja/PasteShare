import dotenv from 'dotenv'; import { Sequelize } from 'sequelize'; dotenv.config(); console.log('Original DATABASE_URL=', process.env.DATABASE_URL); const correctedUrl = process.env.DATABASE_URL?.replace('pooler.supabase', 'supabase') || ''; console.log('Corrected URL=', correctedUrl); const sequelize = new Sequelize(correctedUrl, { dialect: 'postgres', dialectOptions: { ssl: { require: true, rejectUnauthorized: false } } }); async function testConnection() { try { await sequelize.authenticate(); console.log('Connection successful!'); } catch (error) { console.error('Connection failed:', error); } } testConnection();
